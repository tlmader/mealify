(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(18)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(5),i=n.n(r),l=(n(12),n(13),n(1)),c=n(3),u=n(2),s=a.a.createContext({addMeal:function(e){},meals:[{foodPortions:[{id:"1",portions:2},{id:"2",portions:1}]},{foodPortions:[{id:"3",portions:4},{id:"4",portions:1}]}]}),m=function(e){var t=e.children,n=Object(o.useState)({meals:[{foodPortions:[{id:"1",portions:2},{id:"2",portions:1}]},{foodPortions:[{id:"3",portions:4},{id:"4",portions:1}]}]}),r=Object(u.a)(n,2),i=r[0],m=r[1],d=Object(o.useCallback)(function(e){m(function(t){var n=t.meals;return{meals:[].concat(Object(c.a)(n),[e])}})},[m]);return a.a.createElement(s.Provider,{value:Object(l.a)({},i,{addMeal:d})},t)},d=[{id:"1",name:"Spaghetti",calories:500,portion:20},{id:"2",name:"Lemonade",calories:200,portion:10},{id:"3",name:"Sushi",calories:250,portion:10},{id:"4",name:"Green Tea",calories:5,portion:5}],f=new Map(d.map(function(e){return[e.id,e]})),b=function(e){return f.get(e)},p=a.a.createContext({foodItems:d,getFoodItem:b}),E=function(e){var t=e.children;return a.a.createElement(p.Provider,{value:{foodItems:d,getFoodItem:b}},t)},v=(n(14),function(e,t){return e.reduce(function(e,n){var o=t(n.id);return o?e+h(o,n.portions):e},0)}),h=function(e,t){var n=e.calories,o=e.portion;return Math.floor(o*t/100*n)},j=function(e){var t=e.index,n=e.meal,r=Object(o.useContext)(p).getFoodItem,i=v(n.foodPortions,r);return a.a.createElement("div",{className:"MealItem"},a.a.createElement("h4",null,"Meal ",t+1,": ",i," calories"),n.foodPortions.map(function(e){return function(t,n){var o=e(t.id);return o&&a.a.createElement("ul",{className:"MealItem__food-item",key:n},a.a.createElement("li",null,o.name),a.a.createElement("li",null,t.portions," portions"),a.a.createElement("li",null,h(o,t.portions)," total calories"))}}(r)))},O=function(e,t){return a.a.createElement(j,{meal:e,index:t,key:t})},C=function(){var e=Object(o.useContext)(s).meals;return a.a.createElement("div",null,a.a.createElement("h2",null,"My Meals"),e.map(O))},g=(n(15),function(e){return e?Math.min(Math.abs(+e),1e3):""}),P=function(e){var t=e.index,n=e.foodItem,r=e.submitted,i=e.value,l=e.onChange,c=e.onRemove,s=Object(o.useState)({touched:!1}),m=Object(u.a)(s,2),d=m[0].touched,f=m[1],b=Object(o.useCallback)(function(){f({touched:!0})},[f]),p=Object(o.useCallback)(function(e){var o=e.target.value;l(t,{id:n.id,portions:g(o)})},[t,n,l]),E=Object(o.useCallback)(function(){f({touched:!1}),c(t)},[t,f,c]);return a.a.createElement("div",{className:"FoodPortionInput"},a.a.createElement("div",{className:"FoodPortionInput__heading"},a.a.createElement("h4",null,n.name),a.a.createElement("button",{type:"button",onClick:E},"Remove")),a.a.createElement("div",null,a.a.createElement("label",null,"Portions",a.a.createElement("div",{className:"FoodPortionInput__input"},a.a.createElement("input",{value:i.portions,onBlur:b,onChange:p,placeholder:"Enter a number",type:"number",max:"1000",min:"0",step:"0.1"}),h(n,Number(i.portions))," calories",function(e,t,n){var o=n.portions;return(e||t)&&("number"!==typeof o||o<=0)&&a.a.createElement("div",{className:"FoodPortionInput__error"},"Please enter a valid number greater than 0")}(r,d,i)))))},k=(n(16),function(e){var t=e.onAdd,n=Object(o.useContext)(p).foodItems;return a.a.createElement("div",null,a.a.createElement("h3",null,"Food Items"),n.map(function(e){return a.a.createElement("div",{className:"AddFoodItemList__food-item",key:e.id},a.a.createElement("div",{className:"AddFoodItemList__heading"},a.a.createElement("h4",null,e.name),a.a.createElement("button",{type:"button",onClick:function(){return t(e)}},"Add Portion")),a.a.createElement("ul",null,a.a.createElement("li",null,e.calories," calories per 100 grams"),a.a.createElement("li",null,e.portion," grams per portion")))}))}),I=(n(17),{foodPortions:[],submitted:!1}),_=function(e,t){return function(n){return Object(l.a)({},n,{foodPortions:[].concat(Object(c.a)(n.foodPortions.slice(0,e)),[Object(l.a)({},n.foodPortions[e],t,{portions:g(t.portions)})],Object(c.a)(n.foodPortions.slice(e+1)))})}},M=function(e){return Boolean(e.id&&e.portions>0)},F=function(e){var t=e.onValidSubmit,n=Object(o.useState)(I),r=Object(u.a)(n,2),i=r[0],s=i.foodPortions,m=i.submitted,d=r[1],f=Object(o.useContext)(p).getFoodItem,b=Object(o.useCallback)(function(e,t){d(_(e,t))},[d]),E=Object(o.useCallback)(function(){d(I)},[d]),h=Object(o.useCallback)(function(e){d(function(e){return function(t){var n=t.foodPortions,o=n.findIndex(function(t){return t.id===e.id}),a=n[o];return-1===o?Object(l.a)({},t,{foodPortions:n.concat({id:e.id,portions:1})}):_(o,Object(l.a)({},a,{portions:Number(a.portions)+1}))(t)}}(e))},[d]),j=Object(o.useCallback)(function(e){d(function(e){return function(t){return Object(l.a)({},t,{foodPortions:[].concat(Object(c.a)(t.foodPortions.slice(0,e)),Object(c.a)(t.foodPortions.slice(e+1)))})}}(e))},[d]),O=Object(o.useCallback)(function(e){s.length&&s.every(M)?(t({foodPortions:s}),d(I)):d(function(e){return Object(l.a)({},e,{submitted:!0})}),e.preventDefault()},[s,t,d]),C=v(s.map(function(e){return Object(l.a)({},e,{portions:Number(e.portions)})}),f);return a.a.createElement("div",{className:"CreateMealForm"},a.a.createElement(k,{onAdd:h}),a.a.createElement("form",{className:"CreateMealForm__form",onSubmit:O},s.map(function(e,t){var n=f(e.id);return n&&a.a.createElement(P,{index:t,submitted:m,value:e,foodItem:n,onChange:b,onRemove:j,key:t})}),a.a.createElement("h4",null,"Total calories: ",C),!s.length&&a.a.createElement("div",{className:"CreateMealForm__no-food-items"},"Add a food item get started"),a.a.createElement("button",{disabled:!s.length,type:"button",onClick:E},"Reset"),a.a.createElement("button",{disabled:!s.length},"Create Meal")))},N={showForm:!1},w=function(){var e=Object(o.useContext)(s).addMeal,t=Object(o.useState)(N),n=Object(u.a)(t,2),r=n[0].showForm,i=n[1],l=Object(o.useCallback)(function(){i({showForm:!0})},[i]),c=Object(o.useCallback)(function(t){e(t),i(N)},[e,i]);return a.a.createElement("div",null,a.a.createElement("h2",null,"Create a Meal"),r?a.a.createElement(F,{onValidSubmit:c}):a.a.createElement("button",{onClick:l},"Click to begin!"))},y=function(){return a.a.createElement(E,null,a.a.createElement(m,null,a.a.createElement("div",{className:"App"},a.a.createElement("div",null,a.a.createElement("h1",null,"Mealify"),a.a.createElement("h4",null,"Your trusty meal logger!")),a.a.createElement("div",{className:"App__divider"}),a.a.createElement("div",{className:"App__content"},a.a.createElement(C,null),a.a.createElement(w,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[6,1,2]]]);
//# sourceMappingURL=main.bb1574a4.chunk.js.map